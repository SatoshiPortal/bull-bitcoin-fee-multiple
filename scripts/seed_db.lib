#!/bin/bash
# set -e

# #Seeds the DB with historic fee estimate data from .csv file. CSV Headers must have time (UTC) and sats_per_byte (Decimal)

# function lib.seed_db() {

#     cd $root_dir

#     # Read the path to the CSV file from user input
#     read -r -p "Enter the path to the CSV file on your host machine: " csv_path

#     echo "POSTGRES_USER: ${POSTGRES_USER}"
#     echo "POSTGRES_DB: ${POSTGRES_DB}"
#     echo "CSV Path: $csv_path"

#     # Check if the CSV file exists
#     if [ ! -f "$csv_path" ]; then
#         echo "Error: CSV file not found at $csv_path"
#         exit 1
#     fi

#     db_container="btc-fee-tracker-postgres"

#     # Check if the container isn't running
#     if ! docker ps -q --filter "name=${db_container}" | grep -q .; then
#         docker start "${db_container}"

#     fi

#     # Import CSV data into the PostgreSQL container
#     if ! docker exec -it btc-fee-tracker-postgres psql -U "${POSTGRES_USER}" -d "${POSTGRES_DB}" -c "COPY fee_estimate(time,sats_per_byte) FROM '$csv_path' DELIMITER ',' CSV HEADER;"; then
#         echo "Error: Failed to import CSV data into the PostgreSQL database"
#         exit 1
#     fi

#     echo "CSV data imported successfully into the PostgreSQL database"

#     docker stop "${db_container}" 

#     exit 0
# }
